var REQUIRED_JQUERY=1.6,STORAGE=!0,USER_AGENT=navigator.userAgent.toLowerCase(),clearHTML,mountHTML,yearHTML,makeHTML,modelHTML,styleHTML,loaderHTML,inputHTML,resultHTML="",vehicleStr,logoImg="",buyNow=!1,wiring=!1,accessories=!1,preloaded=!1,facebox=!0,merchant_id=0,customer_id=0,mount="",year="",make="",model="",style="",partID="",checkout="google",integrated=!1,cart_link="",jQueryScriptOutputted=!1,widget_loaded=!1,protocol=window.location.protocol;init();initWidget();
function isHttps(){return window.location.protocol="https"}
function init(){var b;if(document.createStyleSheet)b=document.getElementById("configurator").getAttribute("lookupStyle"),document.createStyleSheet("https://labs.curtmfg.com/widget_v2/css/"+(null===b?"default":b)+".css");else{b=document.getElementById("configurator").getAttribute("lookupStyle");b="@import url('https://labs.curtmfg.com/widget_v2/css/"+(null===b?"default":b)+".css');";var c=document.createElement("link");c.rel="stylesheet";c.href="data:text/css,"+escape(b);document.getElementsByTagName("head")[0].appendChild(c)}}
function initWidget(){"undefined"==typeof jQuery?(jQueryScriptOutputted||(jQueryScriptOutputted=!0,document.write('<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"><\/script>')),setTimeout("initWidget()",50)):widget_loaded||(jQuery.extend({getUrlVars:function(){var b=[],c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");jQuery.each(c,function(a,e){e=c[a].split("=");b.push(e[0]);b[e[0]]=e[1]});return b},getUrlVar:function(b){var c=
jQuery.getUrlVars();return void 0!==c&&void 0!==c[b]?c[b]:""}}),jQuery.fn.sort=function(){return this.pushStack([].sort.apply(this,arguments),[])},jQuery("label[for=mount] #mount").live("change",function(){mount=jQuery(this).val();jQuery("#configurator label").remove();jQuery("#loader").show();jQuery.get("http://api.curtmfg.com/v2/GetYear?callback=loadYears",{mount:mount,dataType:"jsonp"},function(){},"jsonp");"rear"==mount?jQuery("#searchStr").text("Rear Mount"):jQuery("#searchStr").text("Front Mount");
jQuery("#clear").show()}),jQuery("label[for=year] #year").live("change",function(){year=jQuery(this).val();jQuery("#configurator label").remove();jQuery("#loader").show();jQuery.get("http://api.curtmfg.com/v2/GetMake?callback=loadMakes",{mount:mount,year:year,dataType:"jsonp"},function(){},"jsonp");var b=jQuery("#searchStr").text();jQuery("#searchStr").text(b+" "+year);jQuery("#clear").show()}),jQuery("#make").live("change",function(){make=jQuery(this).val();jQuery("#configurator label").remove();
jQuery("#loader").show();jQuery.get("http://api.curtmfg.com/v2/GetModel?callback=loadModels",{mount:mount,year:year,make:make,dataType:"JSONP"},function(){},"jsonp");var b=jQuery("#searchStr").text();jQuery("#searchStr").text(b+" "+make)}),jQuery("#model").live("change",function(){model=jQuery(this).val();jQuery("#configurator label").remove();jQuery("#loader").show();jQuery.get("http://api.curtmfg.com/v2/GetStyle?callback=loadCurtStyles",{mount:mount,year:year,make:make,model:model,dataType:"JSONP"},
function(){},"jsonp");var b=jQuery("#searchStr").text();jQuery("#searchStr").text(b+" "+model)}),jQuery("#style").live("change",function(){jQuery("#lookup_submit").show()}),jQuery("#lookup_submit").live("click",function(){0!==jQuery("#style").get().length&&(jQuery("#style").val()!=style&&0<jQuery("#style").val().length)&&(jQuery("#hitchResults").html(""),jQuery(this).hide(),jQuery("#clear").hide(),style=jQuery("#style").val(),jQuery("#configurator label").remove(),jQuery("#loader").show(),jQuery.get("http://api.curtmfg.com/v2/GetParts?callback=loadParts",
{year:year,make:make,model:model,style:style,dataType:"jsonp",integrated:integrated,cust_id:customer_id},function(){},"jsonp"));return!1}),jQuery("#clear").live("click",function(){clearWidget()}),jQuery("ul.tabs li a").live("click",function(){jQuery("ul.tabs li a").removeClass("active");jQuery(this).addClass("active");jQuery(".widget_tab_content").hide();var b=jQuery(this).attr("title");jQuery("#"+b).show()}),widget_loaded=!0,loadConfigurator())}
function clearWidget(){jQuery("#hitchResults").html("");jQuery("#searchStr").text("");jQuery("#clear").hide();jQuery("#configurator").find("label").remove();jQuery("#configurator").append(mountHTML);jQuery("label[for=mount]").show();jQuery("#mount").show()}function sortByClass(b,c){return b.pClass==c.pClass?0:b.pClass>c.pClass?1:-1}
function loadConfigurator(){0<jQuery("#configurator").length&&(jQuery("#configurator").css("display","block"),cleanHTML='<span id="searchStr">&nbsp;</span>',jQuery("#configurator").append(cleanHTML),jQuery("#searchStr").css("display","block"),mountHTML='<label for="mount"><select name="mount" id="mount">',mountHTML+='<option value="">- Select Mount -</option>',mountHTML+='<option value="front">Front Mount</option>',mountHTML+='<option value="rear">Rear Mount</option>',mountHTML+="</select></label>",
jQuery("#configurator").append(mountHTML),jQuery("#mount").css("display","block"),yearHTML='<label for="year"><select name="year" id="year">',yearHTML+='<option value="0">- Select Year - </option>',yearHTML+="</select></label>",makeHTML='<label for="make"><select name="make" id="make">',makeHTML+='<option value="0">- Select Make -</option>',makeHTML+="</select></label>",modelHTML='<label for="model"><select name="model" id="model">',modelHTML+='<option value="0">- Select Model -</option>',modelHTML+=
"</select></label>",styleHTML='<label for="style"><select name="style" id="style">',styleHTML+='<option value="0">- Select Style -</option>',styleHTML+="</select></label>",loaderHTML="<img src='https://labs.curtmfg.com/widget_v2/img/ajax-loader.gif' id='loader' style='display:none' width='208' height='25' />",jQuery("#configurator").append(loaderHTML),inputHTML='<div class="hold"></div><input type="button" id="lookup_submit" name="lookup_submit" value="Find Hitch" />',jQuery("#configurator").append(inputHTML),
clearHTML='<a href="javascript:void(0)" style="display:none;" id="clear">Clear</a>',jQuery("#configurator").append(clearHTML),0===jQuery("#hitchResults").get().length&&(resultHTML='<div id="hitchResults"></div>',jQuery("#configurator").append(resultHTML)),jQuery("#configurator").after('<div style="clear:both"></div>'),jQuery("#hitchResults").hide(),logoImg=null!==jQuery("#configurator").attr("logo")&&""!==jQuery("#configurator").attr("logo")?jQuery.trim(jQuery("#configurator").attr("logo")):"",jQuery("#configurator").attr("buyNow")&&
(buyNow=jQuery("#configurator").attr("buyNow"),merchant_id=jQuery("#configurator").attr("merchant_id"),jQuery("#configurator").attr("checkout")?(checkout=jQuery("#configurator").attr("checkout"),checkout.toLowerCase()):(buyNow=!1,merchant_id=0)),jQuery("#configurator").attr("wiring")&&"true"==jQuery("#configurator").attr("wiring")&&(wiring=!0),jQuery("#configurator").attr("accessories")&&"true"==jQuery("#configurator").attr("accessories")&&(accessories=!0),jQuery("#configurator").attr("integrated")&&
"true"==jQuery("#configurator").attr("integrated")&&(integrated=!0),jQuery("#configurator").attr("customer_id")&&(customer_id=jQuery("#configurator").attr("customer_id")),jQuery("#configurator").attr("cart_path")&&(cart_link=jQuery("#configurator").attr("cart_path")),jQuery(".mini").live("click",function(){var b=jQuery(this).attr("src"),c=jQuery("#mainImage img").attr("src");jQuery(this).attr("src",c);jQuery("#mainImage img").attr("src",b)}),year=jQuery.getUrlVar("year"),make=jQuery.getUrlVar("make"),
model=jQuery.getUrlVar("model"),style=jQuery.getUrlVar("style"),partID=jQuery.getUrlVar("partID"),jQuery(".tab_content").hide(),jQuery("ul.tabs li:first").addClass("active").show(),jQuery(".tab_content:first").show(),jQuery("ul.tabs li").live("click",function(){jQuery("ul.tabs li").removeClass("active");jQuery(this).addClass("active");jQuery(".tab_content").hide();var b=jQuery(this).find("a").attr("href");jQuery(b).fadeIn();return false}),jQuery(".hitchTabs").find("a").live("click",function(){jQuery(this).parent().parent().find(".hitchTab").removeClass("activeHitchTab");
jQuery(this).parent().addClass("activeHitchTab");var b=jQuery(this).attr("class");jQuery(this).parent().parent().next().find(".content").fadeOut();jQuery(this).parent().parent().next().find("."+b+"_content").slideDown();return false}),jQuery(".imageTab_content img").live("click",function(){var b=jQuery(this).attr("src"),b=b.replace("300x225","1024x768");window.open(b,"","resizeable=yes;toolbar=no;status=no")}),jQuery(".prodImg").live("click",function(){var b=jQuery(this).find("img").attr("src"),b=
b.replace("300x225","1024x768");window.open(b,"","resizeable=yes;toolbar=no;status=no");return false}),0<partID?showPart(partID):0<year.length&&(0<make.length&&0<model.length&&0<style.length)&&(year=decodeURIComponent(year),make=decodeURIComponent(make),model=decodeURIComponent(model),style=decodeURIComponent(style),jQuery.get("http://api.curtmfg.com/v2/GetParts?callback=loadParts",{year:year,make:make,model:model,style:style,cust_id:customer_id,integrated:integrated,dataType:"jsonp"},function(){},
"jsonp")),$.get("https://api.curtmfg.com/v2/AddDeployment?url="+window.location.hostname,function(){},"jsonp"))}function checkVersion(b){return"jquery"==b&&!(parseFloat(jQuery.fn.jquery)<REQUIRED_JQUERY)?!0:!1}function showPart(b){0<b&&jQuery.get("http://api.curtmfg.com/v2/GetPart?callback=loadSingle",{partID:b,dataType:"jsonp",integrated:integrated,cust_id:customer_id},function(){},"jsonp")}
function loadYears(b){jQuery("#loader").after(yearHTML);jQuery.each(b,function(b,a){jQuery("#year").append("<option>"+a+"</option>")});jQuery("#loader").hide();jQuery("#year").show()}function loadMakes(b){jQuery("#loader").after(makeHTML);jQuery.each(b,function(b,a){jQuery("#make").append("<option>"+a+"</option>")});jQuery("#loader").hide();jQuery("#make").show()}
function loadModels(b){jQuery("#loader").after(modelHTML);jQuery.each(b,function(b,a){jQuery("#model").append("<option>"+a+"</option>")});jQuery("#loader").hide();jQuery("#model").show()}function loadCurtStyles(b){jQuery("#loader").after(styleHTML);jQuery.each(b,function(b,a){jQuery("#style").append("<option>"+a+"</option>")});jQuery("#loader").hide();jQuery("#style").show()}
function GetPartsForClass(b,c){var a=[];"Other"!=c?jQuery.each(b,function(b,d){jQuery.trim(d.pClass)==c&&a.push(d)}):jQuery.each(b,function(b,c){""===jQuery.trim(c.pClass)&&a.push(c)});return a}
function loadParts(b){vehicleStr=mount+" "+year+" "+make+" "+model+" "+style;vehicleStr.replace("rear","Rear Mount").replace("front","Front Mount");mount=year=make=model=style="";if(null!==b&&0<b.length){var c="",b=jQuery(b).sort(sortByClass),a=[],e=[];jQuery.each(b,function(b,c){-1==c.shortDesc.toUpperCase().indexOf("T-CONNECTOR",0)&&-1==jQuery.inArray(jQuery.trim(c.pClass),a)&&(0<jQuery.trim(c.pClass).length?a.push(jQuery.trim(c.pClass)):-1==jQuery.inArray("Other",a)&&a.push("Other"))});0<a.length&&
(c+='<ul class="tabs">',jQuery.each(a,function(a,f){void 0!==f&&0<f.length&&(e[f]=GetPartsForClass(b,f),c+="<li>",c+='<a href="class'+a+'_content" title="'+f.replace(/ /g,"")+'">'+f+"</a>",c+="</li>")}),c+="</ul>");c+='<div id="widget_tab_container">';jQuery.each(a,function(a,b){c=c+('<div class="widget_tab_content" id="'+b.replace(/ /g,"")+'">');c=c+'<div id="resultBox_outline">';c=c+'<div id="resultBox">';c=c+('<p id="vehicleStr">'+vehicleStr.replace("rear","Rear Mount").replace("front","Front Mount")+
"</p>");if(logoImg!==""){c=c+'<div id="logo">';c=c+('<img src="'+logoImg+'" alt="Company Logo" />');c=c+"</div>"}c=c+'<div style="clear:both"></div>';c=c+('<span>( <span id="hitchCount">'+e[b].length+"</span> ) products found.</span>");c=c+"</div>";c=c+"</div>";c=c+'<div style="clear:both"></div>';jQuery.each(e[b],function(a,b){b.shortDesc.toUpperCase().indexOf("T-CONNECTOR",0)==-1&&(c=c+displayPart(b))});c=c+"</div>"});c+="</div>";jQuery("#hitchResults").html(c);jQuery("#hitchResults").show();jQuery("#loader").before(mountHTML);
jQuery("#mount").show();jQuery("#searchStr").text("");displayWiring()}else vehicleStr.replace("rear","Rear Mount").replace("front","Front Mount"),jQuery("#hitchResults").html('<p id="vehicleStr">No results for '+vehicleStr+"</p>");jQuery("#loader").hide();jQuery("#hitchResults").show();jQuery(".widget_tab_content:first").show();jQuery("ul.tabs li:first a").addClass("active")}
function loadSingle(b){if(null!==b){var c="";0<b.pClass.length&&(c=c+'<ul class="tabs"><li>'+('<a href="class1_content" title="'+b.pClass.replace(/ /g,"")+'">'+b.pClass+"</a>"),c+="</li></ul>");c=c+'<div id="widget_tab_container">'+('<div class="widget_tab_content" id="'+b.pClass.replace(/ /g,"")+'">');c+=displayPart(b);jQuery("#hitchResults").html(c+"</div></div>");jQuery("#hitchResults").show();jQuery("#loader").before(mountHTML);jQuery("#mount").show();jQuery("#searchStr").text("");jQuery(".widget_tab_content:first").show();
jQuery("ul.tabs li:first a").addClass("active");displayWiring()}else jQuery("#hitchResults").html('<p id="vehicleStr">No results</p>')}
function displayPart(b){var c=b.shortDesc.replace("CURT ",""),a="<div class='hitch'>",a=a+"<span class='shortDesc_link'>",a=a+"<img class='curtLogo' src='https://labs.curtmfg.com/widget_v2/img/logo.png' width='80' style='display:inline' />",a=a+"<span class='trademark'>&trade;</span>",a=a+("<span class='hitchTitle'>"+c+"</span><br />"),a=a+"</span>",a=a+("<p>Part #: <strong>"+b.partID+"</strong></p>"),a=a+("<a title='"+b.shortDesc+"' href='https://www.curtmfg.com/masterlibrary/"+b.partID+"/images/"+
b.partID+"_1024x768_a.jpg' class='image prodImg'>"),a=a+("<img src='https://www.curtmfg.com/masterlibrary/"+b.partID+"/images/"+b.partID+"_300x225_a.jpg' onerror='jQuery(this).parent().remove();' />"),a=a+"<span>Click to Enlarge</span>",a=a+"</a>",a=a+"<div class='longDesc'>",a=a+"<div class='hitchSpecs'>",a=a+("<span><strong>"+b.pClass+"</strong></span><br />"),a=a+("<span><strong>Install Time:</strong> "+b.installTime+" minutes</span><br />"),a=a+"<img src='https://labs.curtmfg.com/widget_v2/img/file_pdf.png' />",
a=a+("<a target='_blank' href='https://www.curtmfg.com/masterlibrary/"+b.partID+"/installsheet/CM_"+b.partID+"_INS.pdf'>"),a=a+("Instruction Sheet "+b.partID),a=a+"</a>";if(0<b.attributes.length){var a=a+"<table class='attribute_table'>",e=[];jQuery.each(b.attributes,function(b,c){-1==jQuery.inArray(c.key,e)&&(a+="<tr>",a+="<td>"+c.key+"</td>",a+="<td>"+c.value+"</td>",a+="</tr>",e[b+1]=c.key)});a+="</table>"}var d=[];jQuery.each(b.content,function(b,c){-1==jQuery.inArray(c.value,d)&&"installationSheet"!=
c.key&&(a+="<p class='content_piece'>"+c.value+"</p>",d[b+1]=c.value)});a+="</div>";a+="</div>";a+="<div class='prodLinks'>";c=0;null!==b.custPartID&&(c=b.custPartID);a+=loadCheckout(b.listPrice,b.shortDesc,c,b.partID);a+="</div>";a+="<div style='clear:both'></div>";a+="<div class='hitchTabs'>";a+="<div class='hitchTab imageTab activeHitchTab'>";a+="<a href='"+window.location.href+"' class='imageTab' id='"+b.partID+"'>Images</a>";a+="</div>";0<b.relatedCount&&(a+="<div class='hitchTab accTab'>",a+=
"<a href='"+window.location.href+"' class='accTab' id='"+b.partID+"_accessories'>Accessories</a>",a+="</div>");a+="</div>";a+="<div class='hitchTab_container'>";a+="<div class='imageTab_content content' id='"+b.partID+"_content'>";a+="<img rel='facebox' src='https://www.curtmfg.com/masterlibrary/"+b.partID+"/images/"+b.partID+"_300x225_b.jpg' onerror='jQuery(this).remove()' />";a+="<img src='https://wwww.curtmfg.com/masterlibrary/"+b.partID+"/images/"+b.partID+"_300x225_c.jpg' onerror='jQuery(this).remove()' />";
a+="<img src='https://www.curtmfg.com/masterlibrary/"+b.partID+"/images/"+b.partID+"_300x225_d.jpg' onerror='jQuery(this).remove()' />";a+="<img src='https://www.curtmfg.com/masterlibrary/"+b.partID+"/images/"+b.partID+"_300x225_e.jpg' onerror='jQuery(this).remove()' />";a+="</div>";0<b.relatedCount&&(a+="<div class='accTab_content content' id='"+b.partID+"_accessories'>",GetAccessories(b.partID),a+="</div>");a+="</div>";return a+="</div>"}
function GetAccessories(b){jQuery.get("http://api.curtmfg.com/v2/GetRelatedParts?callback=loadAccessories",{partID:b,dataType:"jsonp",widget:!0,integrated:integrated,cust_id:customer_id},function(){},"jsonp")}
function loadAccessories(b,c){if(null!==c&&0<c.length&&0<b){var a="";jQuery.each(c,function(b,c){a+='<div class="accessory">';a+='<div class="imgContainer">';a+='<div class="imgBorder">';a+='<img onerror="jQuery(this).parent().hide()" src="https://www.curtmfg.com/masterlibrary/'+c.partID+"/images/"+c.partID+'_300x225_a.jpg" />';a+="</div>";if(buyNow){var f=0;null!==c.custPartID&&(f=c.custPartID);a+=loadCheckout(c.listPrice,c.shortDesc,f,c.partID)}a+="</div>";a+='<div class="specs">';a+='<span style="display:block;font-weight: bold">'+
c.shortDesc+"</span>";a+='<div class="details">';a+="<ul>";jQuery.each(c.attributes,function(c,b){a+="<li><strong>"+b.key+"</strong>: "+b.value+"</li>"});a+="</ul>";a+='<div style="clear:both"></div>';a+="</div>";a+='<div style="clear:both"></div>';a+="</div>";a+='<div style="clear:both"></div>';a+="</div>"});jQuery(".hitchTab_container").find("#"+b+"_accessories").html(a)}else 0<b&&(jQuery(".hitchTabs").find("#"+b+"_accessories").parent().remove(),jQuery(".hitchTab_container").find("#"+b+"_accessories").remove())}
function displayWiring(){jQuery.get("http://api.curtmfg.com/v2/GetConnector?callback=loadVehicleRecord",{year:year,make:make,model:model,style:style,dataType:"jsonp",integrated:integrated,cust_id:customer_id},function(){},"jsonp")}
function loadVehicleRecord(b){if(0<b.length){jQuery("ul.tabs").append('<li><a href="#wiring" class="tab" title="Wiring">Wiring</a></li>');var c='<div class="widget_tab_content" id="Wiring">',c=c+'<div id="resultBox_outline">',c=c+'<div id="resultBox">',c=c+('<p id="vehicleStr">'+vehicleStr+"</p>");""!==logoImg&&(c+='<div id="logo">',c+='<img src="'+logoImg+'" alt="Company Logo" />',c+="</div>");c+='<div style="clear:both"></div>';c+='<span>( <span id="hitchCount">'+b.length+"</span> ) hitches found.</span>";
c+="</div>";c+="</div>";c+='<div style="clear:both"></div>';jQuery.each(b,function(a,b){c=c+displayPart(b)});c+="</div>";jQuery("#widget_tab_container").append(c)}}
function loadCheckout(b,c,a,e){var d="";switch(checkout){case "google":0<merchant_id&&(d=d+('<span class="price">'+b+"</span><br />")+'<div class="product">'+('<input type="hidden" class="product-title" value="'+c.replace('""'," inch").replace('"',"")+'">'),d=d+('<input type="hidden" class="product-price" value="'+b+'">')+'<div class="googlecart-add-button" tabindex="0" role="button" title="Add to cart"></div></div>');break;case "american_rv":0<a&&(d=d+('<span class="price">'+b+"</span><br />")+('<a href="https://www.americanrvcompany.com/add_cart.asp?quick=1&amp;item_id='+
a+'" title="Buy Now">')+'<img src="https://labs.curtmfg.com/widget_v2/img/checkout.png" alt="Checkout" /></a><br />');break;case "nuera":c=window.location.pathname;c=-1!=c.indexOf("?")?c+("&partID="+e):c+("?partID="+e);d=d+('<span class="price"><span>Price:</span>'+b+"</span>")+('<form class="nuera" method="post" action="/addtocart.aspx?returnurl='+c+'">')+'<input name="VariantStyle" id="VariantStyle" type="hidden" value="0" /><input name="IsWishList" id="IsWishList" type="hidden" value="0" /><input name="IsGiftRegistry" id="IsGiftRegistry" type="hidden" value="0" /><input name="UpsellProducts" id="UpsellProducts" type="hidden" value="" /><input name="CartRecID" id="CartRecID" type="hidden" value="0" />'+
('<input name="ProductID" id="ProductID" type="hidden" value="'+a+'" />')+'<input name="VariantID" id="VariantID" type="hidden" value="0" /><small>Quantity:</small><input name="Quantity" id="Quantity" type="text" value="1" size="3" maxlength="4" /><input type="submit" value="Add to Cart" /></form>';break;case "custom":d=0<cart_link.length?d+('<span class="price">'+b+"</span><br />")+('<a href="'+cart_link.replace("[part_id]",a)+'" title="Buy Now">'):d+('<a href="javascript:void()" title="Buy Now" class="tiretown" id="'+
a+'">'),d+='<img src="https://www.curtmfg.com/widget_v2/img/checkout.png" alt="checkout" /></a><br />'}return d};